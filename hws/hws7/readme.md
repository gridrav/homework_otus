#  Лабораторная работа. Развертывание коммутируемой сети с резервными каналами

###  Топология:

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hws7/Screens/top1.png)

###     Таблица адресации:

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hws7/Screens/tab1.png)

### Задачи

Часть 1. Создание сети и настройка основных параметров устройства

Часть 2. Выбор корневого моста

Часть 3. Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов

Часть 4. Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета портов

### Общие сведения/сценарий

Избыточность позволяет увеличить доступность устройств в топологии сети за счёт устранения единой точки отказа. Избыточность в коммутируемой сети обеспечивается посредством использования нескольких коммутаторов или нескольких каналов между коммутаторами. Когда в проекте сети используется физическая избыточность, возможно возникновение петель и дублирование кадров.
Протокол spanning-tree (STP) был разработан как механизм предотвращения возникновения петель на 2-м уровне для избыточных каналов коммутируемой сети. Протокол STP обеспечивает наличие только одного логического пути между всеми узлами назначения в сети путем намеренного блокирования резервных путей, которые могли бы вызвать петлю.
В этой лабораторной работе команда show spanning-tree используется для наблюдения за процессом выбора протоколом STP корневого моста. Также вы будете наблюдать за процессом выбора портов с учетом стоимости и приоритета.

###  Решение:

#### Часть 1. Создание сети и настройка основных параметров устройства

В части 1 вам предстоит настроить топологию сети и основные параметры маршрутизаторов.

##### Шаг 1.  Создайте сеть согласно топологии.

Подключите устройства, как показано в топологии, и подсоедините необходимые кабели.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hws7/Screens/top2.png)

##### Шаг 2. Выполните инициализацию и перезагрузку коммутаторов.

##### Шаг 3. Настройте базовые параметры каждого коммутатора.

+ Отключите поиск DNS.
  
+ Присвойте имена устройствам в соответствии с топологией.
  
+ Назначьте class в качестве зашифрованного пароля доступа к привилегированному режиму.
  
+ Назначьте cisco в качестве паролей консоли и VTY и активируйте вход для консоли и VTY каналов.
  
+ Настройте logging synchronous для консольного канала.
  
+ Настройте баннерное сообщение дня (MOTD) для предупреждения пользователей о запрете несанкционированного доступа.
  
+ Задайте IP-адрес, указанный в таблице адресации для VLAN 1 на всех коммутаторах.
  
+ Скопируйте текущую конфигурацию в файл загрузочной конфигурации.

##### Шаг 4. Проверьте связь.

+ Проверьте способность компьютеров обмениваться эхо-запросами.
  
+ Успешно ли выполняется эхо-запрос от коммутатора S1 на коммутатор S2?	______________
  
+ Успешно ли выполняется эхо-запрос от коммутатора S1 на коммутатор S3?	______________
  
+ Успешно ли выполняется эхо-запрос от коммутатора S2 на коммутатор S3?	______________
  
+ Выполняйте отладку до тех пор, пока ответы на все вопросы не будут положительными.

####  Часть 2: Определение корневого моста

Для каждого экземпляра протокола spanning-tree (коммутируемая сеть LAN или широковещательный домен) существует коммутатор, выделенный в качестве корневого моста. Корневой мост служит точкой привязки для всех расчётов протокола spanning-tree, позволяя определить избыточные пути, которые следует заблокировать.
Процесс выбора определяет, какой из коммутаторов станет корневым мостом. Коммутатор с наименьшим значением идентификатора моста (BID) становится корневым мостом. Идентификатор BID состоит из значения приоритета моста, расширенного идентификатора системы и MAC-адреса коммутатора. Значение приоритета может находиться в диапазоне от 0 до 65535 с шагом 4096. По умолчанию используется значение 32768.

##### Шаг 1: Отключите все порты на коммутаторах.

##### Шаг 2: Настройте подключенные порты в качестве транковых.

##### Шаг 3: Включите порты F0/2 и F0/4 на всех коммутаторах.

##### Шаг 4: Отобразите данные протокола spanning-tree.

Введите команду show spanning-tree на всех трех коммутаторах. Приоритет идентификатора моста рассчитывается путем сложения значений приоритета и расширенного идентификатора системы. Расширенным идентификатором системы всегда является номер сети VLAN. В примере ниже все три коммутатора имеют равные значения приоритета идентификатора моста (32769 = 32768 + 1, где приоритет по умолчанию = 32768, номер сети VLAN = 1); следовательно, коммутатор с самым низким значением MAC-адреса становится корневым мостом (в примере — S2).
S1# show spanning-tree

VLAN0001
  Spanning tree enabled protocol ieee
  Root ID    Priority    32769
             Address     0cd9.96d2.4000
             Cost        19
             Port        2 (FastEthernet0/2)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)
             Address     0cd9.96e8.8a00
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time  300 sec

Interface           Role Sts Cost      Prio.Nbr Type
------------------- ---- --- --------- -------- --------------------------------
Fa0/2               Root FWD 19        128.2    P2p 
Fa0/4               Altn BLK 19        128.4    P2p

S2# show spanning-tree

VLAN0001
  Spanning tree enabled protocol ieee
