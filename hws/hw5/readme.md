#  Лабораторная работа. Доступ к сетевым устройствам по протоколу SSH

###  Топология:

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/top1.png)

###     Таблица адресации:

| Устройство       | Интерфейс      | IP-адрес                 |Маска подсети            |   Шлюз по умолчанию  |    
|:-----------------|:---------------|:-------------------------|:------------------------|:---------------------|
| R1               | G0/0/1         |192.168.1.1               |  255.255.255.0          |  -                   |       
| S1               | VLAN 1         | 192.168.1.11             |  255.255.255.0          | 192.168.1.1          |       
| PC-A             | NIC            | 192.168.1.3              | 255.255.255.0           | 192.168.1.1          | 

### Задачи

Часть 1. Настройка основных параметров устройства

Часть 2. Настройка маршрутизатора для доступа по протоколу SSH

Часть 3. Настройка коммутатора для доступа по протоколу SSH

Часть 4. SSH через интерфейс командной строки (CLI) коммутатора

###  Решение:

#### Часть 1. Настройка основных параметров устройства

##### Шаг 1. Создайте сеть согласно топологии.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/top2.png)

##### Шаг 2. Выполните инициализацию и перезагрузку маршрутизатора и коммутатора.

##### Шаг 3. Настройте маршрутизатор.

+ Подключитесь к маршрутизатору с помощью консоли и активируйте привилегированный режим EXEC.
+ Войдите в режим конфигурации.
+ Отключите поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.
+ Назначьте class в качестве зашифрованного пароля привилегированного режима EXEC.
+ Назначьте cisco в качестве пароля консоли и включите вход в систему по паролю.
+ Назначьте cisco в качестве пароля VTY и включите вход в систему по паролю.
+ Зашифруйте открытые пароли.
+ Создайте баннер, который предупреждает о запрете несанкционированного доступа.
+ Настройте и активируйте на маршрутизаторе интерфейс G0/0/1, используя информацию, приведенную в таблице адресации.
+ Сохраните текущую конфигурацию в файл загрузочной конфигурации.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_1.png)

##### Шаг 4. Настройте компьютер PC-A.
                          
+ Настройте для PC-A IP-адрес и маску подсети.
+ Настройте для PC-A шлюз по умолчанию.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_3.png)

##### Шаг 5. Проверьте подключение к сети.

Пошлите с PC-A команду Ping на маршрутизатор R1. Если эхо-запрос с помощью команды ping не проходит, найдите и устраните неполадки подключения.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_4.png)

#### Часть 2. Настройка маршрутизатора для доступа по протоколу SSH

Подключение к сетевым устройствам по протоколу Telnet сопряжено с риском для безопасности, поскольку вся информация передается в виде открытого текста. Протокол SSH шифрует данные сеанса и обеспечивает аутентификацию устройств, поэтому для удаленных подключений рекомендуется использовать именно этот протокол. В части 2 вам нужно настроить маршрутизатор для приема соединений SSH по линиям VTY.

##### Шаг 1. Настройте аутентификацию устройств.

При генерации ключа шифрования в качестве его части используются имя устройства и домен. Поэтому эти имена необходимо указать перед вводом команды crypto key.
Откройте окно конфигурации

+ Задайте имя устройства.
+ Задайте домен для устройства.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_5.png)

##### Шаг 2. Создайте ключ шифрования с указанием его длины. 

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_6.png)
           
##### Шаг 3. Создайте имя пользователя в локальной базе учетных записей.

Настройте имя пользователя, используя admin в качестве имени пользователя и Adm1nP@55 в качестве пароля.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_7.png)
            
##### Шаг 4. Активируйте протокол SSH на линиях VTY.

+ Активируйте протоколы Telnet и SSH на входящих линиях VTY с помощью команды transport input.
  
+ Измените способ входа в систему таким образом, чтобы использовалась проверка пользователей по локальной базе учетных записей.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_8.png)

##### Шаг 5. Сохраните текущую конфигурацию в файл загрузочной конфигурации.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_9.png)

##### Шаг 6. Установите соединение с маршрутизатором по протоколу SSH.

+ Запустите Tera Term с PC-A.
+ Установите SSH-подключение к R1. (username admin, password Adm1nP@55).

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_10.png)

##### Часть 3. Настройка коммутатора для доступа по протоколу SSH
        
В части 3 вам предстоит настроить коммутатор для приема подключений по протоколу SSH, а затем установить SSH-подключение с помощью программы Tera Term.

#####  Шаг 1. Настройте основные параметры коммутатора.

+ Подключитесь к коммутатору с помощью консольного подключения и активируйте привилегированный режим EXEC.
+ Войдите в режим конфигурации.
+ Отключите поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.
+ Назначьте class в качестве зашифрованного пароля привилегированного режима EXEC.
+ Назначьте cisco в качестве пароля консоли и включите вход в систему по паролю.
+ Назначьте cisco в качестве пароля VTY и включите вход в систему по паролю.
+ Зашифруйте открытые пароли.
+ Создайте баннер, который предупреждает о запрете несанкционированного доступа.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_11.png)

+ Настройте и активируйте на коммутаторе интерфейс VLAN 1, используя информацию, приведенную в таблице адресации.
+ Сохраните текущую конфигурацию в файл загрузочной конфигурации.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_12.png)

#####  Шаг 2. Настройте коммутатор для соединения по протоколу SSH.

Для настройки протокола SSH на коммутаторе используйте те же команды, которые применялись для аналогичной настройки маршрутизатора в части 2.

+ Настройте имя устройства, как указано в таблице адресации.
+ Задайте домен для устройства.
+ Создайте ключ шифрования с указанием его длины.
+ Создайте имя пользователя в локальной базе учетных записей.
  
![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_13.png)

+ Активируйте протоколы Telnet и SSH на линиях VTY.
+ Измените способ входа в систему таким образом, чтобы использовалась проверка пользователей по локальной базе учетных записей.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_14.png)

##### Шаг 3. Установите соединение с коммутатором по протоколу SSH.

Запустите программу Tera Term на PC-A, затем установите подключение по протоколу SSH к интерфейсу SVI коммутатора S1.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_15.png)

Вопрос: Удалось ли вам установить SSH-соединение с коммутатором?

> Одновременно Telnet и SSH не удалось активировать, оставил только ssh.

##### Часть 4. Настройка протокола SSH с использованием интерфейса командной строки (CLI) коммутатора

Клиент SSH встроен в операционную систему Cisco IOS и может запускаться из интерфейса командной строки. В части 4 вам предстоит установить соединение с маршрутизатором по протоколу SSH, используя интерфейс командной строки коммутатора.

##### Шаг 1. Посмотрите доступные параметры для клиента SSH в Cisco IOS.

Используйте вопросительный знак (?), чтобы отобразить варианты параметров для команды ssh.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_16.png)

##### Шаг 2. Установите с коммутатора S1 соединение с маршрутизатором R1 по протоколу SSH.

+ Чтобы подключиться к маршрутизатору R1 по протоколу SSH, введите команду –l admin. Это позволит вам войти в систему под именем admin. При появлении приглашения введите в качестве пароля Adm1nP@55

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_17.png)

+ Чтобы вернуться к коммутатору S1, не закрывая сеанс SSH с маршрутизатором R1, нажмите комбинацию клавиш Ctrl+Shift+6. Отпустите клавиши Ctrl+Shift+6 и нажмите x. Отображается приглашение привилегированного режима EXEC коммутатора.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_18.png)

+ Чтобы вернуться к сеансу SSH на R1, нажмите клавишу Enter в пустой строке интерфейса командной строки. Чтобы увидеть окно командной строки маршрутизатора, нажмите клавишу Enter еще раз.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_19.png)

+ Чтобы завершить сеанс SSH на маршрутизаторе R1, введите в командной строке маршрутизатора команду exit.

![alt-текст](https://github.com/gridrav/homework_otus/blob/main/hws/hw5/Screens/Screenshot_20.png)

Вопрос:
Какие версии протокола SSH поддерживаются при использовании интерфейса командной строки?
> SSH 1.99 - поддерживает обе версии протокола.
